:root {
            --bg-primary: #f0f2f5;
            --bg-secondary: #ffffff;
            --bg-tertiary: #f9f9f9;
            --bg-hover: #dee2e6;
            --bg-card: #e9ecef;
            --text-primary: #333;
            --text-secondary: #555;
            --border-color: #eee;
            --border-color-2: #dee2e6;
            --accent-color: #1a73e8;
            --success-color: #28a745;
            --danger-color: #e74c3c;
            --shadow: rgba(0,0,0,0.1);

            /* üé® ÏÉàÎ°ú Ï∂îÍ∞ÄÎêú Ïª¨Îü¨ Í∞ïÏ°∞ Î≥ÄÏàò */
            --color-learning: #17a2b8; /* Ïó∞Ìïú Ï≤≠Î°ù */
            --color-wrong: #ff8c00;    /* Ïò§Î†åÏßÄ */
            --color-safe: #28a745;     /* Ï¥àÎ°ù */

            /* üé® ÌöåÌôî Î™®ÎìúÏö© Ïª¨Îü¨ */
            --color-dialog-a: #2980b9; /* Ï≤≠ÏÉâ Í≥ÑÏó¥ (Ïª¥Ìì®ÌÑ∞) */
            --color-dialog-b: #6f42c1; /* Î≥¥ÎùºÏÉâ Í≥ÑÏó¥ (ÏÇ¨Ïö©Ïûê) */
            --color-dialog-highlight: rgba(41, 128, 185, 0.15); /* ÏùΩÎäî Ï§ë ÌïòÏù¥ÎùºÏù¥Ìä∏ */
        }
        body.dark-mode {
            --bg-primary: #1a1a1a;
            --bg-secondary: #2d2d2d;
            --bg-tertiary: #242424;
            --bg-hover: #3a3a3a;
            --bg-card: #363636;
            --text-primary: #e0e0e0;
            --text-secondary: #b0b0b0;
            --border-color: #404040;
            --border-color-2: #4a4a4a;
            --accent-color: #4a9eff;
            --success-color: #4caf50;
            --danger-color: #f44336;
            --shadow: rgba(0,0,0,0.3);

            /* üé® Îã§ÌÅ¨ Î™®ÎìúÏö© Ïª¨Îü¨ Í∞ïÏ°∞ Î≥ÄÏàò */
            --color-learning: #4ac6c6; 
            --color-wrong: #ffb547;
            --color-safe: #5cb85c;

            /* üé® ÌöåÌôî Î™®ÎìúÏö© Îã§ÌÅ¨ Ïª¨Îü¨ */
            --color-dialog-a: #4a9eff;
            --color-dialog-b: #af70e8;
            --color-dialog-highlight: rgba(74, 158, 255, 0.15);
        }
        body { font-family: 'Malgun Gothic', sans-serif; margin: 0; padding: 20px; background-color: var(--bg-primary); color: var(--text-primary); transition: background-color 0.3s, color 0.3s; }
        .container { max-width: 800px; margin: 0 auto; background: var(--bg-secondary); border-radius: 12px; box-shadow: 0 4px 15px var(--shadow); padding: 25px; transition: background-color 0.3s; }
        h1 { text-align: center; color: var(--accent-color); margin-bottom: 25px; display: flex; align-items: center; justify-content: center; gap: 15px; }
        .dark-mode-toggle { background: var(--bg-card); border: none; padding: 8px 12px; border-radius: 8px; cursor: pointer; font-size: 20px; transition: background 0.3s; }
        .dark-mode-toggle:hover { background: var(--bg-hover); }
        .toggle-header { background: var(--bg-card); padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; text-align: center; margin-bottom: 15px; user-select: none; transition: background 0.3s; }
        .toggle-header:hover { background: var(--bg-hover); }
        .toggle-content { display: none; padding: 15px; background: var(--bg-tertiary); border-radius: 8px; margin-bottom: 15px; border: 1px solid var(--border-color); transition: background-color 0.3s; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 12px; margin-bottom: 15px; }
        .stat-item { background: var(--bg-secondary); padding: 12px; border-radius: 8px; text-align: center; box-shadow: 0 2px 6px var(--shadow); transition: background-color 0.3s; }
        .stat-value { font-size: 22px; font-weight: bold; color: var(--accent-color); }
        .stat-label { font-size: 13px; color: var(--text-secondary); margin-top: 4px; }
        .chart-bar { height: 20px; background: var(--accent-color); border-radius: 5px; text-align: right; padding-right: 6px; color: white; font-size: 12px; line-height: 20px; }
        .settings { background-color: var(--bg-secondary); padding: 15px; border-radius: 8px; margin-bottom: 20px; border: 1px solid var(--border-color-2); transition: background-color 0.3s, border-color 0.3s; }
        .setting-group { margin-bottom: 12px; padding-bottom: 8px; border-bottom: 1px dashed var(--border-color); display: flex; align-items: center; flex-wrap: wrap; gap: 10px; }
        .flash-card { height: 400px; max-height: 500px; overflow-y: auto; background-color: var(--bg-secondary); border: 2px solid var(--bg-card); border-radius: 12px; display: flex; flex-direction: column; justify-content: center; align-items: center; margin: 20px 0; padding: 25px; text-align: center; position: relative; transition: background-color 0.3s, border-color 0.3s; }
        .main-text { font-size: 38px; font-weight: bold; margin-bottom: 20px; color: var(--text-primary); width: 100%; word-break: break-word; overflow-wrap: break-word; cursor: pointer; }
        .sub-text { font-size: 26px; color: var(--text-secondary); font-weight: 500; word-break: break-word; overflow-wrap: break-word; }
        .quiz-options { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; width: 100%; margin-top: 15px; }
        .quiz-btn { padding: 18px; font-size: 18px; font-weight: bold; color: var(--text-primary); background-color: var(--bg-tertiary); border: 2px solid var(--border-color-2); border-radius: 10px; cursor: pointer; transition: all 0.2s; }
        .quiz-btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px var(--shadow); }
        .quiz-btn.correct { background-color: var(--success-color) !important; color: white !important; }
        .quiz-btn.wrong { background-color: var(--danger-color) !important; color: white !important; }
        .progress { width: 100%; height: 8px; background-color: var(--bg-card); position: absolute; bottom: 0; left: 0; border-radius: 0 0 12px 12px; overflow: hidden; }
        .progress-bar { height: 100%; background-color: var(--accent-color); width: 0%; transition: width 0.1s linear; }
        .modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.7); z-index: 1000; justify-content: center; align-items: center; }
        .modal-content { background: var(--bg-secondary); width: 95%; max-width: 650px; border-radius: 15px; padding: 25px; max-height: 80vh; overflow-y: auto; transition: background-color 0.3s; }
        .data-table { width: 100%; border-collapse: collapse; margin-top: 10px; }
        .data-table th, .data-table td { padding: 15px 10px; border-bottom: 1px solid var(--border-color); text-align: left; }
        .speaker-btn { font-size: 20px; color: var(--accent-color); cursor: pointer; padding: 5px; }
        .text-wrong { color: var(--danger-color); font-weight: bold; }
        .text-correct { color: var(--success-color); font-weight: bold; } /* Ï∂îÍ∞ÄÎêú ÌÅ¥ÎûòÏä§ */
        input[type="number"], select { width: 55px; padding: 5px; border: 1px solid var(--border-color-2); border-radius: 4px; text-align: center; background: var(--bg-tertiary); color: var(--text-primary); transition: background-color 0.3s, border-color 0.3s, color 0.3s; }
        select { width: auto; }
        .btn-group { display: flex; gap: 8px; flex-wrap: wrap; justify-content: center; }
        .btn { padding: 12px 20px; border: none; border-radius: 6px; font-weight: bold; cursor: pointer; color: white; transition: all 0.2s; }
        .btn:hover { transform: translateY(-2px); box-shadow: 0 4px 8px var(--shadow); }
        .btn-green { background: var(--success-color); } .btn-red { background: #dc3545; } .btn-gray { background: #6c757d; } .btn-blue { background: var(--accent-color); }
        .status { text-align: center; margin-top: 10px; font-size: 14px; }
        #stMsg { margin-right: 20px; }
        /* üé® ÌöåÌôî Î™®ÎìúÏö© Ïä§ÌÉÄÏùº Ï∂îÍ∞Ä */
        .dialog-role-A { color: var(--color-dialog-a); font-weight: 800; }
        .dialog-role-B { color: var(--color-dialog-b); font-weight: 800; }
        
        /* üé® AB ÎèôÏãú ÌëúÏãúÏö© Ïä§ÌÉÄÏùº */
        .dialog-both-container { width: 100%; display: flex; flex-direction: column; gap: 15px; }
        .dialog-line { padding: 15px; border-radius: 8px; background: var(--bg-tertiary); transition: all 0.3s; }
        .dialog-line.reading { background: var(--color-dialog-highlight); transform: scale(1.02); }
        .dialog-line-header { font-size: 0.7em; margin-bottom: 8px; opacity: 0.8; }
        .dialog-line-text { font-size: 1em; font-weight: bold; margin-bottom: 5px; }
        .dialog-line-translation { font-size: 0.75em; color: var(--text-secondary); }
    
        /* ===== Study-stage fullscreen (internal) ===== */
        .stage-toolbar{
            display:none;
            position:fixed;
            top:10px;
            right:10px;
            z-index:10001;
            gap:8px;
        }
        .stage-btn{
            border:none;
            border-radius:10px;
            padding:10px 12px;
            cursor:pointer;
            background: var(--bg-card);
            color: var(--text-primary);
            box-shadow: 0 2px 8px rgba(0,0,0,0.12);
            font-size:16px;
        }
        body.stage-full{
            overflow:hidden;
        }
        body.stage-full .container{
            max-width:none !important;
            width:100% !important;
            padding:0 !important;
            margin:0 !important;
        }
        body.stage-full .container > h1{
            display:none !important;
        }
        body.stage-full #studyStage{
            position:fixed;
            inset:0;
            z-index:10000;
            overflow:auto;
            padding:16px;
            background: var(--bg-secondary);
        }
        body.stage-full .settings{
            display:none;
        }
        body.stage-full.stage-show-settings .settings{
            display:block;
            position:sticky;
            top:56px;
            z-index:10000;
            background: var(--bg-secondary);
            padding:12px;
            border-radius:12px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.08);
            margin-bottom:12px;
        }
        body.stage-full .stage-toolbar{
            display:flex;
        }
        body.stage-full .flash-card{
            min-height: calc(100vh - 140px);
        }

    
        /* ===== ÌïúÏòÅ ÌÜ†Í∏Ä Ïä§ÌÉÄÏùº ===== */
        body[data-ui-lang="ko"] .lang-en { display: none !important; }
        body[data-ui-lang="en"] .lang-kr { display: none !important; }
        body:not([data-ui-lang]) .lang-en { display: none !important; }
